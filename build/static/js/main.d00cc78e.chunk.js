(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{122:function(e,t,n){e.exports=n(137)},130:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(86),o=(n(130),n(197)),l=n(190),i=n(69),s=n(10);function u(){u=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},c=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",l=r.toStringTag||"@@toStringTag";function i(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{i({},"")}catch(N){i=function(e,t,n){return e[t]=n}}function s(e,t,n,r){var c=t&&t.prototype instanceof m?t:m,o=Object.create(c.prototype),l=new S(r||[]);return a(o,"_invoke",{value:w(e,n,l)}),o}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=s;var f={};function m(){}function h(){}function p(){}var v={};i(v,c,function(){return this});var b=Object.getPrototypeOf,E=b&&b(b(k([])));E&&E!==t&&n.call(E,c)&&(v=E);var g=p.prototype=m.prototype=Object.create(v);function y(e){["next","throw","return"].forEach(function(t){i(e,t,function(e){return this._invoke(t,e)})})}function x(e,t){var r;a(this,"_invoke",{value:function(a,c){function o(){return new t(function(r,o){!function a(r,c,o,l){var i=d(e[r],e,c);if("throw"!==i.type){var s=i.arg,u=s.value;return u&&"object"==typeof u&&n.call(u,"__await")?t.resolve(u.__await).then(function(e){a("next",e,o,l)},function(e){a("throw",e,o,l)}):t.resolve(u).then(function(e){s.value=e,o(s)},function(e){return a("throw",e,o,l)})}l(i.arg)}(a,c,r,o)})}return r=r?r.then(o,o):o()}})}function w(e,t,n){var a="suspendedStart";return function(r,c){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===r)throw c;return L()}for(n.method=r,n.arg=c;;){var o=n.delegate;if(o){var l=j(o,n);if(l){if(l===f)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===a)throw a="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a="executing";var i=d(e,t,n);if("normal"===i.type){if(a=n.done?"completed":"suspendedYield",i.arg===f)continue;return{value:i.arg,done:n.done}}"throw"===i.type&&(a="completed",n.method="throw",n.arg=i.arg)}}}function j(e,t){var n=t.method,a=e.iterator[n];if(void 0===a)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,j(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var r=d(a,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,f;var c=r.arg;return c?c.done?(t[e.resultName]=c.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):c:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function k(e){if(e){var t=e[c];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,r=function t(){for(;++a<e.length;)if(n.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:L}}function L(){return{value:void 0,done:!0}}return h.prototype=p,a(g,"constructor",{value:p,configurable:!0}),a(p,"constructor",{value:h,configurable:!0}),h.displayName=i(p,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,i(e,l,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},y(x.prototype),i(x.prototype,o,function(){return this}),e.AsyncIterator=x,e.async=function(t,n,a,r,c){void 0===c&&(c=Promise);var o=new x(s(t,n,a,r),c);return e.isGeneratorFunction(n)?o:o.next().then(function(e){return e.done?e.value:o.next()})},y(g),i(g,l,"Generator"),i(g,c,function(){return this}),i(g,"toString",function(){return"[object Generator]"}),e.keys=function(e){var t=Object(e),n=[];for(var a in t)n.push(a);return n.reverse(),function e(){for(;n.length;){var a=n.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=k,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function a(n,a){return o.type="throw",o.arg=e,t.next=n,a&&(t.method="next",t.arg=void 0),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var c=this.tryEntries[r],o=c.completion;if("root"===c.tryLoc)return a("end");if(c.tryLoc<=this.prev){var l=n.call(c,"catchLoc"),i=n.call(c,"finallyLoc");if(l&&i){if(this.prev<c.catchLoc)return a(c.catchLoc,!0);if(this.prev<c.finallyLoc)return a(c.finallyLoc)}else if(l){if(this.prev<c.catchLoc)return a(c.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<c.finallyLoc)return a(c.finallyLoc)}}}},abrupt:function(e,t){for(var a=this.tryEntries.length-1;a>=0;--a){var r=this.tryEntries[a];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var c=r;break}}c&&("break"===e||"continue"===e)&&c.tryLoc<=t&&t<=c.finallyLoc&&(c=null);var o=c?c.completion:{};return o.type=e,o.arg=t,c?(this.method="next",this.next=c.finallyLoc,f):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:k(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}var d=Object(a.createContext)();function f(e){var t=e.children,n=Object(a.useState)(!1),c=Object(s.a)(n,2),o=c[0],l=c[1],f=Object(a.useState)(!1),m=Object(s.a)(f,2),h=m[0],p=m[1],v=Object(a.useState)(!1),b=Object(s.a)(v,2),E=b[0],g=b[1],y=Object(a.useState)(""),x=Object(s.a)(y,2),w=x[0],j=x[1],O=Object(a.useState)(!1),C=Object(s.a)(O,2),S=C[0],k=C[1],L=Object(a.useState)(null),N=Object(s.a)(L,2),F=N[0],T=N[1],P=function(){var e=Object(i.a)(u().mark(function e(t){var n,a,r,c,o;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),n=t.selectedFile,a=t.selectedConfig,r=t.selectedClientType,e.next=4,fetch("/data?file=".concat(n,"&config=").concat(a,"&type=").concat(r));case 4:if((c=e.sent).ok){e.next=9;break}return E||g(!0),k(!1),e.abrupt("return",Promise.reject(c));case 9:if(!c.ok){e.next=17;break}return e.next=12,c.json();case 12:o=e.sent,j(o),E&&g(!1),k(!1),T("file=".concat(n,"&config=").concat(a,"&type=").concat(r));case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),A=Object(a.useState)(null),_=Object(s.a)(A,2),I=_[0],B=_[1],G=Object(a.useState)(null),D=Object(s.a)(G,2),W=D[0],R=D[1],V=function(){var e=Object(i.a)(u().mark(function e(){var t,n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("File context function called"),!(W&&W.length>1)){e.next=4;break}return o&&l(!1),e.abrupt("return");case 4:return e.next=6,fetch("/files");case 6:if((t=e.sent).ok){e.next=11;break}return console.log("File API Error"),l(!0),e.abrupt("return",Promise.reject(t));case 11:if(!t.ok){e.next=17;break}return o&&l(!1),e.next=15,t.json();case 15:n=e.sent,R(n);case 17:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),U=Object(a.useState)(null),M=Object(s.a)(U,2),H=M[0],J=M[1],Y=Object(a.useState)(null),q=Object(s.a)(Y,2),z=q[0],K=q[1],Q=function(){var e=Object(i.a)(u().mark(function e(){var t,n;return u().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("appContext Config called"),!(z&&Object.keys(z).length>1)){e.next=4;break}return h&&l(!1),e.abrupt("return");case 4:return e.next=6,fetch("/configs");case 6:if((t=e.sent).ok){e.next=11;break}return console.log("bad response"),h||p(!0),e.abrupt("return",Promise.reject(t));case 11:if(!t.ok){e.next=20;break}return console.log("Res of config = "+t.ok),e.next=15,t.json();case 15:n=e.sent,h&&p(!1),K(n),e.next=21;break;case 20:return e.abrupt("return");case 21:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),X=Object(a.useState)("All"),Z=Object(s.a)(X,2),$=Z[0],ee=Z[1],te={tabledata:w,setTabledata:j,getData:P,selectedFile:I,setSelectedFile:B,files:W,setFiles:R,selectedConfig:H,setSelectedConfig:J,configs:z,setConfigs:K,selectedClientType:$,setSelectedClientType:ee,isLoading:S,setIsLoading:k,filesAsyncFunction:V,configsAsyncFunction:Q,isFileError:o,isConfigError:h,isDataError:E,exportToCSV:F};return r.a.createElement(d.Provider,{value:te},t)}function m(){return Object(a.useContext)(d)}function h(e){var t=m(),n=t.configsAsyncFunction,c=t.configs,i=t.selectedFile,s=t.selectedConfig,u=c?c[i]:[];return console.log(c),Object(a.useEffect)(function(){console.log("Use effect Config called"),n()},[]),c?i?r.a.createElement(l.a,{onChange:function(t,n){return e.handleChange(t,n)},disablePortal:!0,label:"Select config",id:"combo-box",value:s,options:u,isOptionEqualToValue:function(e){return""!==e.value},sx:{width:300},renderInput:function(e){return r.a.createElement(o.a,Object.assign({},e,{label:"Select config"}))}}):r.a.createElement(l.a,{disabled:!0,value:s,options:[],disablePortal:!0,label:"Select config",id:"combo-box",sx:{width:300},renderInput:function(e){return r.a.createElement(o.a,Object.assign({},e,{label:"Select file..."}))}}):r.a.createElement(l.a,{disabled:!0,value:s,options:[],disablePortal:!0,label:"Select config",id:"combo-box",sx:{width:300},renderInput:function(e){return r.a.createElement(o.a,Object.assign({},e,{label:"Loading..."}))}})}function p(e){var t=m(),n=t.filesAsyncFunction,c=t.files;return Object(a.useEffect)(function(){console.log("Use effect file called"),n()},[]),c?r.a.createElement(l.a,{onChange:function(t,n){return e.handleChange(t,n)},disablePortal:!0,id:"combo-box",options:c,sx:{width:300},renderInput:function(e){return r.a.createElement(o.a,Object.assign({},e,{label:"Select file"}))}}):r.a.createElement(l.a,{disabled:!0,id:"combo-box",disablePortal:!0,sx:{width:300},renderInput:function(e){return r.a.createElement(o.a,Object.assign({},e,{label:"Loading..."}))}})}var v=n(204),b=n(199),E=n(195),g=n(198),y=n(191);function x(e){var t=m().selectedClientType;return r.a.createElement(v.a,{sx:{minWidth:120}},r.a.createElement(g.a,{fullWidth:!0},r.a.createElement(b.a,{id:"clientTypeSelect"},"Client Type"),r.a.createElement(y.a,{labelId:"clientType",id:"demo-simple-select",value:t,label:"client type",onChange:e.handleChange},["All","type_1","type_2"].map(function(e){return r.a.createElement(E.a,{key:e,value:e},e)}))))}var w=n(202);n(135);function j(){console.log("search bar rendered");var e=m(),t=e.getData,n=e.selectedFile,a=e.setSelectedFile,c=e.selectedConfig,o=e.setSelectedConfig,l=e.selectedClientType,i=m().setSelectedClientType;return r.a.createElement("div",{className:"searchArea"},r.a.createElement("div",{className:"searchContainer"},r.a.createElement("div",{className:"searchBar"},r.a.createElement("div",{"data-testid":"fileSearch",className:"searchElement select"},r.a.createElement(p,{handleChange:function(e,t){o(null),a(t)}})),r.a.createElement("div",{"data-testid":"configSearch",className:"searchElement select"},r.a.createElement(h,{handleChange:function(e,t){o(t)}})),r.a.createElement("div",{"data-testid":"clientType",className:"searchElement select"},r.a.createElement(x,{handleChange:function(e){var t=e.target.value;i(t)}})),r.a.createElement("div",{"data-testid":"configSearch",className:"searchElement btn"},(!c||!n)&&r.a.createElement(w.a,{disabled:!0,variant:"contained"},"Submit"),c&&n&&r.a.createElement(w.a,{onClick:function(e){e.preventDefault(),t({selectedFile:n,selectedConfig:c,selectedClientType:l})},variant:"contained"},"Submit")))))}var O=n(205);function C(){return a.createElement("div",{className:"spinner"},a.createElement(v.a,{sx:{display:"flex"}},a.createElement(O.a,null)))}var S=n(194),k=n(200);function L(){return r.a.createElement("div",{className:"error"},r.a.createElement(k.a,{sx:{width:"100%"},spacing:2},r.a.createElement(S.a,{severity:"error"},"API Error. Please refresh and try again")))}var N=n(193),F=n(206),T=n(210),P=n(214),A=n(213),_=n(209),I=n(211),B=n(212),G=n(203),D=n(201),W=[{id:"name",label:"Site"},{id:"businessModelType",label:"Type"},{id:"value",label:"Value"}];function R(e){var t=e.data,n=e.clickHandler,r=e.order,c=e.orderBy;return t?!e.hasFailed&&t?a.createElement("div",{className:"tableArea"},a.createElement(_.a,{className:"tableContainer",component:D.a},a.createElement(T.a,{"aria-label":"simple table"},a.createElement(I.a,null,a.createElement(B.a,null,W.map(function(e){return a.createElement(A.a,{key:e.id,align:"left",sortDirection:c===e.id&&r,onClick:n(e.id)},a.createElement(G.a,{active:c===e.id,direction:c===e.id?r:"asc"},e.label))}))),a.createElement(P.a,null,t.map(function(e){return a.createElement(B.a,{key:e.name,sx:{"&:last-child td, &:last-child th":{border:0}}},a.createElement(A.a,{component:"th",scope:"row",style:{maxWidth:"50px"},className:"textContainer"},e.name),a.createElement(A.a,{component:"th",scope:"row",style:{maxWidth:"50px"},className:"textContainer"},e.businessModelType),a.createElement(A.a,{align:"left",className:"textContainer",style:{maxWidth:"400px"}},e.value))}))))):void 0:a.createElement("p",null,"No data found")}function V(){var e=m().tabledata,t=r.a.useState("asc"),n=Object(s.a)(t,2),a=n[0],c=n[1],o=r.a.useState("name"),l=Object(s.a)(o,2),i=l[0],u=l[1],d=e.sort(function(e,t){return"asc"===a?e[i].toLowerCase()>t[i].toLowerCase()?1:-1:e[i].toLowerCase()<t[i].toLowerCase()?1:-1}),f=function(e,t){u(t),c("asc"===a?"desc":"asc")};if(e)return r.a.createElement("div",null,r.a.createElement(R,{data:d,clickHandler:function(e){return function(t){f(t,e)}},order:a,orderBy:i}))}var U=n(19);function M(e){var t=e.data;return a.createElement("div",{className:"tableArea"},a.createElement(_.a,{className:"tableContainer",component:D.a,sx:{padding:0}},a.createElement(T.a,{"aria-label":"simple table"},a.createElement(I.a,null,a.createElement(B.a,null,a.createElement(A.a,{align:"left",style:{width:100}},"Value"),a.createElement(A.a,{align:"left"},"Count"))),a.createElement(P.a,null,t.map(function(e){return a.createElement(B.a,{key:e.key,sx:{"&:last-child td, &:last-child th":{border:0}}},a.createElement(A.a,{component:"th",scope:"row",style:{maxWidth:800},className:"textContainer"},e.key),a.createElement(A.a,{component:"th",scope:"row",className:"textContainer"},e.count))})))))}function H(){var e=m().tabledata,t=[],n=null;if(e&&(Object(U.a)(new Set(e.map(function(e){return e.value}))).forEach(function(n){var a=0;e.forEach(function(e){e.value===n&&a++}),t.push({key:n,count:a})}),n=t.sort(function(e,t){return t.count-e.count})),n)return r.a.createElement("div",null,r.a.createElement(M,{data:n}))}var J=function(){var e=m().exportToCSV,t=Object(a.useState)(null),n=Object(s.a)(t,2),c=n[0],o=n[1];return Object(a.useEffect)(function(){fetch("/csv-data?".concat(e),{method:"GET",headers:{"Content-Type":"application/text"}}).then(function(e){return e.blob()}).then(function(e){var t=window.URL.createObjectURL(e);console.log(t),o(t)})},[e]),r.a.createElement("a",{href:c,target:"_blank",rel:"noopener noreferrer",download:"download.csv"},r.a.createElement(w.a,{variant:"outlined"},"Export"))};function Y(e){var t=e.children,n=e.value,r=e.index;return a.createElement(a.Fragment,null,a.createElement("div",{role:"tabpanel",hidden:n!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r),orientation:"vertical"},n===r&&a.createElement(v.a,{sx:{p:3}},t)))}function q(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function z(){var e=a.useState(0),t=Object(s.a)(e,2),n=t[0],r=t[1];return a.createElement("div",{className:"tableAll",sx:{width:"100%"}},a.createElement("div",{className:"exportBtnRow"},a.createElement("div",{className:"exportBtn"},a.createElement(J,null))),a.createElement(v.a,{sx:{borderBottom:1,borderColor:"divider"}},a.createElement(N.a,{value:n,onChange:function(e,t){r(t)},"aria-label":"basic tabs example"},a.createElement(F.a,Object.assign({label:"Summary"},q(0))),a.createElement(F.a,Object.assign({label:"List of sites"},q(1))))),a.createElement("div",{className:"panelDiv"},a.createElement(Y,{sx:{padding:0},value:n,index:0},a.createElement(H,null)),a.createElement(Y,{value:n,index:1},a.createElement(V,null))))}function K(){var e=m(),t=e.isFileError,n=e.isConfigError,a=e.isLoading,c=e.isDataError,o=e.tabledata,l=t||n||c;return console.log("app rerendered"),l?r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Config report"),r.a.createElement(L,null),r.a.createElement("div",{"data-testid":"searchBar"},r.a.createElement(j,null)))):a?r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Config report"),r.a.createElement("div",{"data-testid":"searchBar"},r.a.createElement(j,null),r.a.createElement(C,null)))):r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("h1",null,"Config report"),r.a.createElement("div",{"data-testid":"searchBar"},r.a.createElement(j,null)),r.a.createElement("div",null,o&&r.a.createElement(z,null))))}var Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,215)).then(function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),c(e),o(e)})},X=(n(136),document.getElementById("root"));Object(c.createRoot)(X).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(f,null,r.a.createElement(K,null)))),Q()}},[[122,1,2]]]);
//# sourceMappingURL=main.d00cc78e.chunk.js.map